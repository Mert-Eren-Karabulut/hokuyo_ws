<?xml version="1.0"?>
<!-- 
    Launch file for real pan-tilt system
    - Loads URDF model
    - Starts robot_state_publisher (converts /joint_states to TF)
    - Starts laser_real_position node
-->
<launch>
    <!-- Load the URDF into the parameter server -->
    <param name="robot_description" 
           command="cat $(find hokuyo_go)/urdf/real_pantilt.urdf" />

    <!-- Start robot_state_publisher -->
    <!-- This node reads /joint_states and publishes TF transforms automatically -->
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher">
        <param name="publish_frequency" value="50.0" />
    </node>

    <!-- Optional: Visualize TF tree in RViz -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find hokuyo_go)/rviz/real_pantilt.rviz" />

    <!-- Start the laser scanning node -->
    <node name="laser_real_position" pkg="hokuyo_go" type="laser_real_position" output="screen">
        <!-- Scanning parameters -->
        <param name="target_velocity" value="1.0" />     <!-- Target velocity (rad/s) -->
        <param name="scan_duration" value="0.0" />      <!-- Scan duration (seconds, 0=infinite) -->
        <param name="pan_limit_deg" value="30.0" />      <!-- Pan motion limit (degrees) -->
        <param name="tilt_limit_deg" value="20.0" />     <!-- Tilt motion limit (degrees) -->
        <param name="voxel_size" value="0.05" />         <!-- Parent Seeder Voxel size (meters) -->
        <param name="subvoxel_threshold" value="0.35" /> <!-- Subdivision threshold (0.0-1.0) -->
    </node>

</launch>
